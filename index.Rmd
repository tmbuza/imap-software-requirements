---
title:  "<big><u>IMAP-PART 1</u></big><br><br>Getting started with Microbiome Data Analysis<br><br>"
subtitle: |
  | ![](../images/cicd.png)<br>
  | Integrated Microbiome Analysis Pipelines (IMAP) with Snakemake & GitHub Actions<br><br>
date: |
  |  Updated on `r Sys.Date()` <br>
author: Teresia Mrema-Buza
output: 
  html_document: 
    css: styles.css
csl: "library/apa.csl"
bibliography: "library/references.bib"
link-citations: true
mainfont:
biblio-style: apalike
email_address: "tmbuza@complexdatainsights.com"
github_repo: "https://github.com/tmbuza/imap-requirements"
github_page: "https://tmbuza.github.io/imap-requirements/"
related_website: "https://complexdatainsights.com"
description: |
  This repo provides integrated and highly curated solutions for reproducible microbiome data analysis.

---
<h4>Github Repo: `r rmarkdown::metadata$github_repo`. </h4> 

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">

```{r echo=FALSE, message=FALSE, warning=FALSE}
source("workflow/scripts/common.R")
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE,
  cache = FALSE,
  comment = NA,
  fig.path='./figures/',
  fig.show='asis',
  dev = 'png',
  fig.align='center',
  out.width = "70%",
  fig.width = 7,
  fig.asp = 0.7,
  fig.show = "asis"
)

library(tidyverse, suppressPackageStartupMessages())
library(mikropml)
library(schtools)

```


# General Overview

- We use the snakemake workflow management system [@Koster2021; @Snakemake2023] for:
  - Maintaining reproducibility in technical validation and regeneration of results
  - Creating scalable data analysis scaled to server, grid or cloud environment seamlessly.
  - Fostering sustainable improvement of the microbiome data analysis.
- Reviewing existing workflows methodlogies [@Snakemake2023; @Mothursnakemake] helps in gaining a better insights for improving microbiome data analysis.
- We break any complex workflows into small contiguous but related chunks for simplicity reasons.
- Each major step forms a separate executable snakemake rule and is represented in the DAG (Directed Acyclic Graph).

<br>

> We envision to keep fostering on continuous integration and development of highly reproducible workflows.


<br><hr width=100%><br>

# Basic requirements

<img src="images/imap-part1.png">

<br><br>

## Snakemake rule DAG
<img src="dags/rulegraph.svg">
<br><br>

## Screenshot of interactive snakemake report {#smkreport}
> Open the snakemake html report using a compartible browser such as chrome to explore more on the workflow and the associated statistics. You will be able to close the left bar to get a better view of the dispaly.

<img src="images/smkreport/screenshot.png">

<br><hr width=100%><br>

# Basic Software
```{r child='workflow/scripts/01a_basic_software.Rmd'}
```

<br><hr width=100%><br>

# Sample metadata
```{r child='workflow/scripts/01b_samplemetadata.Rmd'}
```

<br><hr width=100%><br>

<!-- #  -->
```{r eval=FALSE, child='workflow/scripts/.Rmd', include=FALSE}
```

<br><hr width=100%><br>

<!-- #  -->
```{r eval=FALSE, child='workflow/scripts/.Rmd', include=FALSE}
```

<br><hr width=100%><br>

<!-- #  -->
```{r eval=FALSE, child='workflow/scripts/.Rmd', include=FALSE}
```

<br><hr width=100%><br>

<!-- #  -->
```{r eval=FALSE, child='workflow/scripts/.Rmd', include=FALSE}
```

<br><hr width=100%><br>

# Appendix
<br><br>

## Project directories
```{bash}
cat project_tree.txt
```


## Troubleshooting (in progress)
<ol>
  <li></li>
    <ul></ul>.
  <li></li>
    <ul></ul>
</ol>

<br><br>

## References
::: {#refs}
:::

<br><br><hr width=50%><br>

<div id="footer">
Last updated on `r format(Sys.time(), '%B %d, %Y')`. <br><br>
These workflows are continuously reviewed, integrated, tested and compiled by [`r rmarkdown::metadata$author`](mailto:`r rmarkdown::metadata$email_address`).  
Github_Repo: `r rmarkdown::metadata$github_repo`.  
Github_Page (this document): `r rmarkdown::metadata$github_page`.  
Visit the [Complex Data Insights (CDI) website](`r rmarkdown::metadata$related_website`) for more practical user guides (...in progress).  
</div><br><br>
